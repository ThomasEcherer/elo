Ext.data.JsonP.p19_Indexserver_Scripting({"guide":"<h1 id='p19_Indexserver_Scripting-section-indexserver-scripting-'>Indexserver scripting </h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ul>\n<li>1. <a href='#!/guide/p19_Indexserver_Scripting-section-ix-function-%28function-module%29'>IX function (function module)</a>\n </li>\n<li>2. <a href='#!/guide/p19_Indexserver_Scripting-section-ix-action'>IX action</a>\n </li>\n<li>3. <a href='#!/guide/p19_Indexserver_Scripting-section-ix-service'>IX service</a>\n </li>\n<li>4. <a href='#!/guide/p19_Indexserver_Scripting-section-dynamic-keyword-lists'>Dynamic keyword lists</a>\n </li>\n</ul></div>\n\n\n<p>The following shows some best practice methods for creating functions with the help of the ELO Indexserver.</p>\n\n\n<h2 id='p19_Indexserver_Scripting-section-ix-function-%28function-module%29'>IX function (function module)</h2>\n\n\n<p>Where possible, Indexserver functions should be implemented as <code><a href=\"#!/api/sol.common.ix.FunctionBase\" rel=\"sol.common.ix.FunctionBase\" class=\"docClass\">sol.common.ix.FunctionBase</a></code>. This ensures that the implemented function can be called as a workflow module as well as independently via the IX interface.</p>\n\n\n<pre><code>importPackage(Packages.de.elo.ix.client);\n\n//@include lib_Class.js\n//@include lib_sol.common.ix.FunctionBase.js\n// further includes\n\nvar logger = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;<a href=\"#!/api/sol.Logger\" rel=\"sol.Logger\" class=\"docClass\">sol.Logger</a>&quot;, { scope: &quot;{{namespace}}.ix.functions.{{className}}&quot; });\n\n/**\n * {{description}}\n *\n * @author {{author}}, {{company}}\n * @version 1.00.000\n *\n * @eloix\n * @requires <a href=\"#!/api/sol.common.Config\" rel=\"sol.common.Config\" class=\"docClass\">sol.common.Config</a>\n * @requires <a href=\"#!/api/sol.common.ConfigMixin\" rel=\"sol.common.ConfigMixin\" class=\"docClass\">sol.common.ConfigMixin</a>\n * @requires sol.common.ObjectUtils.js\n * @requires sol.common.StringUtils.js\n * @requires sol.common.JsonUtils.js\n * @requires sol.common.RepoUtils.js\n * @requires sol.common.WfUtils.js\n * @requires sol.common.ix.RfUtils.js\n * @requires <a href=\"#!/api/sol.common.ix.FunctionBase\" rel=\"sol.common.ix.FunctionBase\" class=\"docClass\">sol.common.ix.FunctionBase</a>\n */\n<a href=\"#!/api/sol-static-method-define\" rel=\"sol-static-method-define\" class=\"docClass\">sol.define</a>(&quot;{{namespace}}.ix.functions.{{className}}&quot;, {\n  extend: &quot;<a href=\"#!/api/sol.common.ix.FunctionBase\" rel=\"sol.common.ix.FunctionBase\" class=\"docClass\">sol.common.ix.FunctionBase</a>&quot;,\n\n  // you might add required configuration here //\n  //requiredConfig: [],\n\n  // configuration section //\n  /** \n   * @cfg {Type} exampleCfg\n   */\n\n  // property section //\n  /**\n   * @private\n   * @property {Type} exampleProperty\n   */\n\n  initialize: function (config) {\n    var me = this;\n    me.$super(&quot;<a href=\"#!/api/sol.common.ix.FunctionBase\" rel=\"sol.common.ix.FunctionBase\" class=\"docClass\">sol.common.ix.FunctionBase</a>&quot;, &quot;initialize&quot;, [config]);\n    // do your initialization //\n  },\n\n  /**\n   * {{description}}\n   */\n  process: function () {\n    var me = this;\n    // do your processing //\n  }\n\n  // add your internal methods //\n\n});\n\n/**\n * @member {{namespace}}.ix.functions.{{className}}\n * @static\n * @inheritdoc <a href=\"#!/api/sol.common.ix.FunctionBase-static-method-onEnterNode\" rel=\"sol.common.ix.FunctionBase-static-method-onEnterNode\" class=\"docClass\">sol.common.ix.FunctionBase.onEnterNode</a>\n */\nfunction onEnterNode(ci, userId, wfDiagram, nodeId) {\n  logger.enter(&quot;onEnterNode_{{className}}&quot;, { &quot;flowId&quot;: wfDiagram.id, &quot;nodeId&quot;: nodeId });\n  var config = <a href=\"#!/api/sol.common.WfUtils-method-parseAndCheckParams\" rel=\"sol.common.WfUtils-method-parseAndCheckParams\" class=\"docClass\">sol.common.WfUtils.parseAndCheckParams</a>(wfDiagram, nodeId), // you might add required properties here\n      module;\n\n  // These might be usefull in your class //\n  //config.objId = wfDiagram.objId;\n  //config.ci = ci;\n  module = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;{{namespace}}.ix.functions.{{className}}&quot;, config);\n\n  module.process();\n\n  logger.exit(&quot;onEnterNode_{{className}}&quot;);\n}\n\n/**\n * @member {{namespace}}.ix.functions.{{className}}\n * @static\n * @inheritdoc <a href=\"#!/api/sol.common.ix.FunctionBase-static-method-onExitNode\" rel=\"sol.common.ix.FunctionBase-static-method-onExitNode\" class=\"docClass\">sol.common.ix.FunctionBase.onExitNode</a>\n */\nfunction onExitNode(ci, userId, wfDiagram, nodeId) {\n  logger.enter(&quot;onExitNode_{{className}}&quot;, { &quot;flowId&quot;: wfDiagram.id, &quot;nodeId&quot;: nodeId });\n  var config = <a href=\"#!/api/sol.common.WfUtils-method-parseAndCheckParams\" rel=\"sol.common.WfUtils-method-parseAndCheckParams\" class=\"docClass\">sol.common.WfUtils.parseAndCheckParams</a>(wfDiagram, nodeId), // you might add required properties here\n      module;\n\n  // These might be usefull in your class //\n  //config.objId = wfDiagram.objId;\n  //config.ci = ci;\n  module = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;{{namespace}}.ix.functions.{{className}}&quot;, config);\n\n  module.process();\n\n  logger.exit(&quot;onExitNode_{{className}}&quot;);\n}\n\n/**\n * @member {{namespace}}.ix.functions.{{className}}\n * @method RF_{{namespaceWithUnderscores}}_function_{{className}}\n * @static\n * @inheritdoc <a href=\"#!/api/sol.common.ix.FunctionBase-static-method-RF_FunctionName\" rel=\"sol.common.ix.FunctionBase-static-method-RF_FunctionName\" class=\"docClass\">sol.common.ix.FunctionBase.RF_FunctionName</a>\n */\nfunction RF_{{namespaceWithUnderscores}}_function_{{className}}(ec, configAny) {\n  logger.enter(&quot;RF_{{namespaceWithUnderscores}}_function_{{className}}&quot;, configAny);\n  var rfUtils = <a href=\"#!/api/sol.common.ix.RfUtils\" rel=\"sol.common.ix.RfUtils\" class=\"docClass\">sol.common.ix.RfUtils</a>,\n      config = rfUtils.parseAndCheckParams(ec, arguments.callee.name, configAny), // you might add required properties here\n      module;\n\n  // These might be usefull in your class //\n  //config.ci = ec.ci;\n  //config.user = ec.user;\n\n  module = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;{{namespace}}.ix.functions.{{className}}&quot;, config);\n  module.process();\n\n  logger.exit(&quot;RF_{{namespaceWithUnderscores}}_function_{{className}}&quot;);\n}\n</code></pre>\n\n\n<h2 id='p19_Indexserver_Scripting-section-ix-action'>IX action</h2>\n\n\n<pre><code>importPackage(Packages.de.elo.ix.client);\n\n//@include lib_Class.js\n//@include lib_sol.common.ix.ActionBase.js\n// further includes\n\nvar logger = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;<a href=\"#!/api/sol.Logger\" rel=\"sol.Logger\" class=\"docClass\">sol.Logger</a>&quot;, { scope: &quot;{{namespace}}.ix.actions.{{className}}&quot; });\n\n/**\n * {{description}}\n * \n * @author {{author}}, {{company}}\n * @version 1.00.000\n * \n * @eloix\n * @requires <a href=\"#!/api/sol.common.JsonUtils\" rel=\"sol.common.JsonUtils\" class=\"docClass\">sol.common.JsonUtils</a>\n * @requires <a href=\"#!/api/sol.common.SordUtils\" rel=\"sol.common.SordUtils\" class=\"docClass\">sol.common.SordUtils</a>\n * @requires <a href=\"#!/api/sol.common.IxUtils\" rel=\"sol.common.IxUtils\" class=\"docClass\">sol.common.IxUtils</a>\n * @requires <a href=\"#!/api/sol.common.CounterUtils\" rel=\"sol.common.CounterUtils\" class=\"docClass\">sol.common.CounterUtils</a>\n * @requires <a href=\"#!/api/sol.common.TranslateTerms\" rel=\"sol.common.TranslateTerms\" class=\"docClass\">sol.common.TranslateTerms</a>\n * @requires <a href=\"#!/api/sol.common.WfUtils\" rel=\"sol.common.WfUtils\" class=\"docClass\">sol.common.WfUtils</a>\n * @requires <a href=\"#!/api/sol.common.ix.RfUtils\" rel=\"sol.common.ix.RfUtils\" class=\"docClass\">sol.common.ix.RfUtils</a>\n * @requires <a href=\"#!/api/sol.common.ix.ActionBase\" rel=\"sol.common.ix.ActionBase\" class=\"docClass\">sol.common.ix.ActionBase</a>\n */\n<a href=\"#!/api/sol-static-method-define\" rel=\"sol-static-method-define\" class=\"docClass\">sol.define</a>(&quot;{{namespace}}.ix.actions.{{className}}&quot;, {\n  extend: &quot;<a href=\"#!/api/sol.common.ix.ActionBase\" rel=\"sol.common.ix.ActionBase\" class=\"docClass\">sol.common.ix.ActionBase</a>&quot;,\n\n  // you might add required configuration here //\n  //requiredConfig: [],\n\n  // configuration section //\n  /** \n   * @cfg {Type} exampleCfg\n   */\n\n  // property section //\n  /**\n   * @private\n   * @property {Type} exampleProperty\n   */\n\n  initialize: function (config) {\n    var me = this;\n    me.$super(&quot;<a href=\"#!/api/sol.common.ix.ActionBase\" rel=\"sol.common.ix.ActionBase\" class=\"docClass\">sol.common.ix.ActionBase</a>&quot;, &quot;initialize&quot;, [config]);\n    // do your initialization //\n  },\n\n  /**\n   * Returns the name of this action.\n   * @return {String}\n   */\n  getName: function () {\n    return &quot;{{className}}&quot;;\n  },\n\n  /**\n   * {{description}}\n   */\n  process: function () {\n    var me = this;\n    // do your processing //\n    me.addErrorEvent(&quot;This is just an example, this action has no implementaion yet&quot;);\n  }\n\n  // add your internal methods //\n\n});\n\n/**\n * @member {{namespace}}.ix.actions.{{className}}\n * @method RF_{{namespaceWithUnderscores}}_action_{{className}}\n * @static\n * @inheritdoc <a href=\"#!/api/sol.common.ix.ActionBase-static-method-RF_FunctionName\" rel=\"sol.common.ix.ActionBase-static-method-RF_FunctionName\" class=\"docClass\">sol.common.ix.ActionBase.RF_FunctionName</a>\n */\nfunction RF_{{namespaceWithUnderscores}}_action_{{className}}(ec, configAny) {\n  var config, action, result;\n\n  logger.enter(&quot;RF_{{namespaceWithUnderscores}}_action_{{className}}&quot;, configAny);\n\n  config = <a href=\"#!/api/sol.common.ix.RfUtils-method-parseAndCheckParams\" rel=\"sol.common.ix.RfUtils-method-parseAndCheckParams\" class=\"docClass\">sol.common.ix.RfUtils.parseAndCheckParams</a>(ec, arguments.callee.name, configAny), // you might add required properties here\n\n  // These might be usefull in your class //\n  //config.ci = ec.ci;\n  //config.user = ec.user;\n\n  action = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;{{namespace}}.ix.actions.{{className}}&quot;, config);\n  result = action.execute();\n\n  logger.exit(&quot;RF_{{namespaceWithUnderscores}}_action_{{className}}&quot;);\n\n  return result;\n}\n</code></pre>\n\n\n<h2 id='p19_Indexserver_Scripting-section-ix-service'>IX service</h2>\n\n\n<p>Where possible, Indexserver functions that return data or require further processing of data should be implemented as <code><a href=\"#!/api/sol.common.ix.ServiceBase\" rel=\"sol.common.ix.ServiceBase\" class=\"docClass\">sol.common.ix.ServiceBase</a></code>. </p>\n\n\n<pre><code>importPackage(Packages.de.elo.ix.client);\n\n//@include lib_Class.js\n//@include lib_sol.common.ix.ServiceBase.js\n\nvar logger = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;<a href=\"#!/api/sol.Logger\" rel=\"sol.Logger\" class=\"docClass\">sol.Logger</a>&quot;, { scope: &quot;{{namespace}}.ix.services.{{className}}&quot; });\n\n/**\n * {{description}}\n *\n * @author {{author}}, {{company}}\n * @version 1.00.000\n *\n * @eloix\n * @requires <a href=\"#!/api/sol.common.JsonUtils\" rel=\"sol.common.JsonUtils\" class=\"docClass\">sol.common.JsonUtils</a>\n * @requires <a href=\"#!/api/sol.common.ix.RfUtils\" rel=\"sol.common.ix.RfUtils\" class=\"docClass\">sol.common.ix.RfUtils</a>\n * @requires <a href=\"#!/api/sol.common.ix.ServiceBase\" rel=\"sol.common.ix.ServiceBase\" class=\"docClass\">sol.common.ix.ServiceBase</a>\n */\n<a href=\"#!/api/sol-static-method-define\" rel=\"sol-static-method-define\" class=\"docClass\">sol.define</a>(&quot;{{namespace}}.ix.services.{{className}}&quot;, {\n  extend: &quot;<a href=\"#!/api/sol.common.ix.ServiceBase\" rel=\"sol.common.ix.ServiceBase\" class=\"docClass\">sol.common.ix.ServiceBase</a>&quot;,\n\n  // you might add required configuration here //\n  //requiredConfig: [],\n\n  // configuration section //\n  /** \n   * @cfg {Type} exampleCfg\n   */\n\n  // property section //\n  /**\n   * @private\n   * @property {Type} exampleProperty\n   */\n\n  initialize: function (config) {\n    var me = this;\n    me.$super(&quot;<a href=\"#!/api/sol.common.ix.ServiceBase\" rel=\"sol.common.ix.ServiceBase\" class=\"docClass\">sol.common.ix.ServiceBase</a>&quot;, &quot;initialize&quot;, [config]);\n    // do your initialization //\n  },\n\n  /**\n   * {{description}}\n   */\n  process: function () {\n    var me = this;\n    // do your processing //\n    return { hallo: &quot;welt&quot; };\n\n  }\n\n  // add your internal methods //\n\n});\n\n/**\n * @member {{namespace}}.ix.services.{{className}}\n * @method RF_{{namespaceWithUnderscores}}_service_{{className}}\n * @static\n * @inheritdoc <a href=\"#!/api/sol.common.ix.ServiceBase-static-method-RF_ServiceBaseName\" rel=\"sol.common.ix.ServiceBase-static-method-RF_ServiceBaseName\" class=\"docClass\">sol.common.ix.ServiceBase.RF_ServiceBaseName</a>\n */\nfunction RF_{{namespaceWithUnderscores}}_service_{{className}}(ec, configAny) {\n  var rfUtils = <a href=\"#!/api/sol.common.ix.RfUtils\" rel=\"sol.common.ix.RfUtils\" class=\"docClass\">sol.common.ix.RfUtils</a>,\n      config, service, result;\n\n  logger.enter(&quot;RF_{{namespaceWithUnderscores}}_service_{{className}}&quot;, configAny);\n\n  config = rfUtils.parseAndCheckParams(ec, arguments.callee.name, configAny), // you might add required properties here\n\n  // These might be usefull in your class //\n  //config.ci = ec.ci;\n  //config.user = ec.user;\n\n  service= <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;{{namespace}}.ix.services.{{className}}&quot;, config);\n  result = rfUtils.stringify(service.process());\n\n  logger.exit(&quot;RF_{{namespaceWithUnderscores}}_service_{{className}}&quot;);\n\n  return result;\n}\n</code></pre>\n\n\n<h2 id='p19_Indexserver_Scripting-section-dynamic-keyword-lists'>Dynamic keyword lists</h2>\n\n\n<p>Dynamic keyword lists should be implemented with the help of the <code><a href=\"#!/api/sol.common.ix.DynKwlDatabaseIterator\" rel=\"sol.common.ix.DynKwlDatabaseIterator\" class=\"docClass\">sol.common.ix.DynKwlDatabaseIterator</a></code> class. This encapsulates basic requirements for handling databases and is easy to configure.</p>\n\n\n<pre><code>importPackage(Packages.de.elo.ix.jscript);\nimportPackage(Packages.de.elo.ix.scripting);\n\n//@include lib_Class.js.js\n//@include lib_sol.common.ix.DynKwlDatabaseIterator.js\n\n/**\n * Dynamic keyword list that queries the recipients database.\n *\n * The list of current fields is returned as a table.\n *\n * |Name|Key|Example data|\n * |:-----|:------|:------|\n * |Company Code|COMPANY_NO|122|\n * |Name|COMPANY_NAME|ELO Digital Office GmbH|\n * |Street|COMPANY_ADDRESS_STREET|TuebingerStr. 34|\n * |Zip code|COMPANY_ADDRESS_ZIPCODE|70178|\n * |City|COMPANY_ADDRESS_CITY|Stuttgart|\n * |Country|COMPANY_ADDRESS_COUNTRY|DE|\n *\n * Limits results to COMPANY_NO.\n *\n * @author {{author}}, {{company}}\n * @version 1.00.000\n */\n<a href=\"#!/api/sol-static-method-define\" rel=\"sol-static-method-define\" class=\"docClass\">sol.define</a>('sol.invoice.ix.dynkwl.Company', {\n  extends: '<a href=\"#!/api/sol.common.ix.DynKwlDatabaseIterator\" rel=\"sol.common.ix.DynKwlDatabaseIterator\" class=\"docClass\">sol.common.ix.DynKwlDatabaseIterator</a>',\n  /**\n   * @cfg\n   * @inheritdoc\n   */\n  tableTitle: 'Company',\n  /**\n   * @cfg\n   * @inheritdoc\n   */\n  sqlQuery: &quot;select CODE, NAME, STREET, ZIPCODE, CITY, COUNTRY_CODE from sol_invoice_company where CODE like ? OR NAME like ?&quot;,\n  /**\n   * @cfg\n   * @inheritdoc\n   */\n  sqlParams: [\n    {mode: 'STARTS_WITH'},\n    {mode: 'CONTAINS'}\n  ],\n  /**\n   * @cfg\n   * @inheritdoc\n   */\n  tableKeyNames: [&quot;COMPANY_CODE&quot;, &quot;COMPANY_NAME&quot;, null, null, null, null],\n  //tableKeyNames: [&quot;COMPANY_CODE&quot;, &quot;COMPANY_NAME&quot;, &quot;COMPANY_ADDRESS_STREET&quot;, &quot;COMPANY_ADDRESS_ZIPCODE&quot;, &quot;COMPANY_ADDRESS_CITY&quot;, &quot;COMPANY_ADDRESS_COUNTRY&quot;],\n  /**\n   * @cfg\n   * @inheritdoc\n   */\n  tableHeaders: [&quot;Nummer&quot;, &quot;Name&quot;, &quot;Stra&szlig;e&quot;, &quot;PLZ&quot;, &quot;Ort&quot;, &quot;Land&quot;]\n});\n\n/**\n * @static\n * @member sol.invoice.ix.dynkwl.Company\n * Implements a DynamicKeywordDataProvider for this keyword list that can be used by checkoutKeywordsDynamic.\n * @returns {DynamicKeywordDataProvider}\n */\nfunction getDataIterator() {\n  var log = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>(&quot;<a href=\"#!/api/sol.Logger\" rel=\"sol.Logger\" class=\"docClass\">sol.Logger</a>&quot;, {scope: &quot;sol.invoice.ix.dynkwl.Company&quot;}),\n    iterator;\n  try {\n    log.info(&quot;DynamicKeywordList (&quot;);\n    iterator = <a href=\"#!/api/sol-static-method-create\" rel=\"sol-static-method-create\" class=\"docClass\">sol.create</a>('sol.invoice.ix.dynkwl.Company', {});\n    return new DynamicKeywordDataProvider(iterator);\n  } finally {\n    log.info(&quot;)getDataIterator&quot;);\n  }\n}\n</code></pre>\n\n","title":"Indexserver scripting "});